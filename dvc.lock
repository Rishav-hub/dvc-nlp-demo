schema: '2.0'
stages:
  prepare_data:
    cmd: python src/stage_01_prepare.py -c config/config.yaml -p params.yaml
    deps:
    - path: config/config.yaml
      md5: bd818ebadf9a88ef7da611775b1aa8bb
      size: 373
    - path: data/data.xml
      md5: a304afb96060aad90176268345e10355
      size: 37891850
    - path: params.yaml
      md5: ae23e8828b372ad8da616690418d0685
      size: 211
    - path: src/stage_01_prepare.py
      md5: 564cac411634a5fe2b383fc427b9eb9e
      size: 2275
    - path: src/utils/all_utils.py
      md5: 5d4c594bde3524a3605f7904f51536b0
      size: 1500
    - path: src/utils/data_management.py
      md5: 0c7829d209ab910f945c81af1c68d5a4
      size: 890
    params:
      params.yaml:
        prepare.seed: 2021
        prepare.split: 0.2
    outs:
    - path: artifacts\prepared\test.tsv
      md5: 553034c4cf40efc63c99c19fe98610d0
      size: 18986541
    - path: artifacts\prepared\train.tsv
      md5: 60c757f3b30604473de7fa775dfc00d9
      size: 4899778
  featurize:
    cmd: python src/stage_02_featurization.py -c config/config.yaml -p params.yaml
    deps:
    - path: artifacts\prepared\test.tsv
      md5: 553034c4cf40efc63c99c19fe98610d0
      size: 18986541
    - path: artifacts\prepared\train.tsv
      md5: 60c757f3b30604473de7fa775dfc00d9
      size: 4899778
    - path: config/config.yaml
      md5: bd818ebadf9a88ef7da611775b1aa8bb
      size: 373
    - path: params.yaml
      md5: ae23e8828b372ad8da616690418d0685
      size: 211
    - path: src/stage_02_featurization.py
      md5: 62fcf402438ff07d126838636b41d545
      size: 2924
    - path: src/utils/all_utils.py
      md5: 5d4c594bde3524a3605f7904f51536b0
      size: 1500
    - path: src\utils\featurize.py
      md5: 171a7f328095b3481da169ef3f02de44
      size: 531
    params:
      params.yaml:
        featurize.max_features: 3000
        featurize.ngrams: 2
    outs:
    - path: artifacts\features\test.pkl
      md5: 82e9f7fe70c2eb0014f6ba540f3e5810
      size: 6447077
    - path: artifacts\features\train.pkl
      md5: 9933da24703ff6a557aaebfaeaf60232
      size: 1671793
  train:
    cmd: python src/stage_03_training.py -c config/config.yaml -p params.yaml
    deps:
    - path: artifacts\prepared\train.tsv
      md5: 60c757f3b30604473de7fa775dfc00d9
      size: 4899778
    - path: config/config.yaml
      md5: bd818ebadf9a88ef7da611775b1aa8bb
      size: 373
    - path: params.yaml
      md5: ae23e8828b372ad8da616690418d0685
      size: 211
    - path: src/stage_03_training.py
      md5: 53840f24ee000d88a604b929f40bcf4b
      size: 2268
    - path: src/utils/all_utils.py
      md5: 5d4c594bde3524a3605f7904f51536b0
      size: 1500
    params:
      params.yaml:
        train.min_split: 8
        train.n_est: 70
        train.seed: 2021
    outs:
    - path: artifacts\model\model.pkl
      md5: a02f3c12fe673e9a15e77fc275a2f19a
      size: 917976
